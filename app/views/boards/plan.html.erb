<%= render "shared/navbar" %>

<div class="container-full">

	<div class="row">
		<div class="col-md-7">
			<div class="menu">
				<span>Category:</span>

				<div class="dropdown" style="display: inline;">
					<a href="#" data-toggle="dropdown" class="menu-link"><%= Category.find(@bcat).name %></a>
					<ul class="dropdown-menu" role="menu">
						<% @categories.each do |category| %>
							<li><%= link_to category.name, :controller => "boards", :action => "plan", :bcat => category.id, :kcat => @kcat, :view => @view %></li>
						<% end %>
					</ul>
				</div>

			</div>			
			<div class="panel panel-default">
			  <div class="panel-heading">
			    <h3 class="panel-title">Backlog</h3>
			  </div>
			  
				<ul class="list-group column" style="height: 750px" id="column-backlog">
					<% @bcards.each do |card| %>
						<% if card.status == "backlog" %>
							<% if card.class == Project %>
									<%= render :partial => "projects/project_card", :locals => { :project => card, :cat_id => @bcat } %>
							<% end %>
							<% if card.class == Task %>
									<%= render :partial => "tasks/task_card", :locals => { :task => card, :cat_id => @bcat } %>
							<% end %>
						<% end %>
				  <% end %>
				</ul>
			</div>			
		</div>
		<div class="col-md-17">
			<div class="row">
				<div class="col-md-24">
					<div class="menu">
						<div class="dropdown" style="display: inline;">
							<a href="#" data-toggle="dropdown" class="menu-link">
								<%= "Projects" if @view == "projects" %>
								<%= "Tasks" if @view == "tasks" %>
							</a>
							<ul class="dropdown-menu" role="menu">
								<li><%= link_to "Projects", :controller => "boards", :action => "plan", :bcat => @bcat, :kcat => @kcat, :view => "projects" %></li>
								<li><%= link_to "Tasks", :controller => "boards", :action => "plan", :bcat => @bcat, :kcat => @kcat, :view => "tasks" %></li>								
							</ul>
						</div>

						<span>this</span>
						<a href="#" class="menu-link">Week</a>
						<span>in category</span>
						<div class="dropdown" style="display: inline;">
							<a href="#" data-toggle="dropdown" class="menu-link"><%= Category.find(@kcat).name %></a>
							<ul class="dropdown-menu" role="menu">
								<% @categories.each do |category| %>
									<li><%= link_to category.name, :controller => "boards", :action => "plan", :bcat => @bcat, :kcat => category.id, :view => @view %></li>
								<% end %>
							</ul>
						</div>						
						<div class="dropdown pull-right" style="width: 500px">
							<a href="#" data-toggle="dropdown" class="pull-right menu-link">Collaborators</a>
							<ul class="dropdown-menu" role="menu" id="category-users">
								<% Category.find(@kcat).users.each do |user| %>
									<li class="drop-down-item"><%= user.email %></li>
								<% end %>
								<li class="drop-down-item">
									<%= form_tag('/assignments', :method => :post, :remote => true) do %>
										<%= hidden_field_tag :category_id, @kcat %>
										<%= text_field_tag :email, "Enter email address", :class => "form-control" %>
									<% end %>
								</li>
							</ul>
						</div>
					</div>
				</div>

			</div>
			<div class="row">
				<div class="col-md-8">
					<div class="panel panel-default">
					  <div class="panel-heading">
					    <h3 class="panel-title">Not Started</h3>
					  </div>

						<ul class="list-group column" id="column-planned">
							<% @kcards.each do |card| %>
				                <% if card.status == "planned" %>
				                  <% if card.class == Project %>
				                      <%= render :partial => "projects/project_card", :locals => { :project => card, :cat_id => @kcat } %>
				                  <% end %>
				                  <% if card.class == Task %>
				                      <%= render :partial => "tasks/task_card", :locals => { :task => card, :cat_id => @kcat } %>
				                  <% end %>
				                <% end %>
						  <% end %>
						</ul>


					</div>		
				</div>
				<div class="col-md-8">
					<div class="panel panel-default">
					  <div class="panel-heading">
					    <h3 class="panel-title">Started</h3>
					  </div>
						<ul class="list-group column" id="column-started">
							<% @kcards.each do |card| %>
								<% if card.status == "started" %>
									<% if card.class == Project %>
											<%= render :partial => "projects/project_card", :locals => { :project => card, :cat_id => @kcat } %>
									<% end %>
									<% if card.class == Task %>
											<%= render :partial => "tasks/task_card", :locals => { :task => card, :cat_id => @kcat } %>
									<% end %>
							  <% end %>
						  <% end %>
						</ul>
					</div>		
				</div>		
				<div class="col-md-8">
					<div class="panel panel-default">
					  <div class="panel-heading">
					    <h3 class="panel-title">Done</h3>
					  </div>
						<ul class="list-group column" id="column-done">
							<% @kcards.each do |card| %>
								<% if card.status == "done" %>
									<% if card.class == Project %>
											<%= render :partial => "projects/project_card", :locals => { :project => card, :cat_id => @kcat } %>
									<% end %>
									<% if card.class == Task %>
											<%= render :partial => "tasks/task_card", :locals => { :task => card, :cat_id => @kcat } %>
									<% end %>
							  <% end %>
						  <% end %>
						</ul>
					</div>		
				</div>
			</div>
		</div>
	</div>
	
</div>
